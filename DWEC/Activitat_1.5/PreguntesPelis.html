<html>
	<head>
		<meta charset="UTF-8">
		<style>

			body{
				background-image: url("http://wallpaperstock.net/the-hunger-games-catching-fire-katniss-everdeen_wallpapers_37546_1280x1024.jpg");
				background-repeat: no-repeat;
				background-size: 100%;
			}

			form{
				font-weight: bold;
				border-radius: 10px;
				padding: 5px;
				margin: 100px auto 10px auto;
				font-family: monospace;
				color: snow;
				background-color: rgba(0, 0, 0, 0.6);
			}

			button{
				box-shadow:inset 0px 1px 0px 0px #fce2c1;
				background:linear-gradient(to bottom, #ffc477 5%, #fb9e25 100%);
				border-radius:6px;
				border:1px solid #eeb44f;
				padding:6px 24px;
				text-shadow:0px 1px 0px #cc9f52;
				color: rgb(74, 74, 74);
				display: block;
				margin: 0 auto;
				font-size: 12pt;
				font-weight: bold;
			}

			button:hover{
				cursor: pointer;
			}

			#form1{
				width: 400px;
				margin: 0 auto;
				display: block;
			}

			#form2{
				width: 500px;
				margin: 0 auto;
				display: none;
			}

			#form3{
				display: none;
				width: 820px;
				margin: auto auto 10px auto;
			}

			#printarResposta{
				color: snow;
				text-align: center;
				font-size: 18pt;
			}


			.ordredades{
				display: inline-block;
				margin: 5px;
				width: 150px;
			}

			#data{
				text-align: right;
			}

			#reinici{
				margin: 0 auto;
				display: block;
			}

			#gif{
				 -webkit-animation: myfirst 10s linear 1s infinite normal;
				  position: relative;
				  float:right;
			}

			@-webkit-keyframes myfirst {
			    0%   {right:0px; top: 0px; opacity: 0}
			    100% { right: 100%; top: 0px; }
			    
			} 


		</style>
	</head>
	<body>
		<div id="content">

			<div id="form1">
				<form>
					
						<p id="data"></p>

						<label class="ordredades">Nom:</label>
						<input id="nom" class="ordredades" type="text" value="" name"nom">
						<br>
						<label class="ordredades" >Data naixement:</label>
						<input id="datanaix" class="ordredades" type="date" value="" name="datanaix">

						<p id="tries"></p>

				</form>

				<button onclick="demanaDades()" >Som-hi</button>
			</div>

			<div id="form2">
				<h3 style="display: table; margin: auto auto -50px auto; color: snow; ">Respon a les preguntes</h3>
				<form >
						<label class="ordre" ><b>Quin tipus de personatge t'agrada en una pelicula?</b></label>
						<br>
						<input class="ordre" type="radio" name="pregunta1" value="extrany">Extrany
						<input class="ordre" type="radio" name="pregunta1" value="valent">Valent
						<input class="ordre" type="radio" name="pregunta1" value="cabrejat">Cabrejat
						<br><br>

						<label class="ordre" ><b>Tria quin tipus de pelicula tagrada més?</b></label>
						<br>
						<input class="ordre" type="radio" name="pregunta2" value="ficcio">Ficcio
						<input class="ordre" type="radio" name="pregunta2" value="animacio">Accio
						<input class="ordre" type="radio" name="pregunta2" value="intria">Polemica
						<br><br>

						<label class="ordre" ><b>Quin actor tagrada mes?</b></label>
						<br>
						<input class="ordre" type="radio" name="pregunta3" value="dio">Dio
						<input class="ordre" type="radio" name="pregunta3" value="bruce">Bruce willis
						<input class="ordre" type="radio" name="pregunta3" value="robert">Robert de niro	
						<br><br>

						<label class="ordre" ><b>Quin ambient prefereixes?</b></label>
						<br>
						<input class="ordre" type="radio" name="pregunta4" value="antiga">Zona antiga
						<input class="ordre" type="radio" name="pregunta4" value="ciutat">Ciutat
						<input class="ordre" type="radio" name="pregunta4" value="afores">Afores
						<br><br>

						<label class="ordre" ><b>Quina pelicula t'agrada més?</b></label>
						<br>
						<input class="ordre" type="radio" name="pregunta5" value="historia">La historia interminable
						<input class="ordre" type="radio" name="pregunta5" value="trans">Transporter
						<input class="ordre" type="radio" name="pregunta5" value="dollar">million dollar baby						
						<br><br>

				</form>
				<button onclick="Respostes()">Resultat!</button>
			</div>

			<div id="form3">
				<h3 id="printarResposta"></h3>
				<div id="imatges">
					
				</div>
				<br>
				<button id="reinici" onclick="Reset()">Reiniciar?</button>
			</div>
		</div>

		<img id="gif" src="http://www.gifss.com/animales_fantasticos/draco1.gif">

		<script>

			function setCookie(cname, cvalue, exdays) {
			    var d = new Date();
			    d.setTime(d.getTime() + (exdays*24*60*60*1000));
			    var expires = "expires="+d.toUTCString();
			    document.cookie = cname + "=" + cvalue + "; " + expires;
			}

			function getCookie(cname) {
			    var name = cname + "=";
			    var ca = document.cookie.split(';');
			    for(var i=0; i<ca.length; i++) {
			        var c = ca[i];
			        while (c.charAt(0)==' ') c = c.substring(1);
			        if (c.indexOf(name) != -1) return c.substring(name.length, c.length);
			    }
			    return "";
			}

			function checkCookie() {
			    var user = getCookie("username");
			    if (user != "") {
			        alert("Hola de nou " + user);
			    }
			}

			checkCookie()

			var tries=0;

			var meses = new Array ("Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre");
			var diasSemana = new Array("Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte");
			var f=new Date();
			document.getElementById("data").innerHTML=(diasSemana[f.getDay()] + ", " + f.getDate() + " de " + meses[f.getMonth()] + " de " + f.getFullYear());

			document.getElementById("tries").innerHTML="Cops que has fet el test: "+tries;

			//------------------------------------------------------------------------

			var fo1 = document.getElementById("form1");
			var fo2 = document.getElementById("form2");
			var fo3 = document.getElementById("form3");
			

			function demanaDades(){	

				var nom=document.getElementById("nom").value;
                var valorcookie=nom+" l'ultim cop vas fer el test "+tries+" cops";
				var datanaix=document.getElementById("datanaix");
				tries++;
				
		        fo1.style.display = 'none';
		        fo2.style.display ='block';

		        setCookie("username",valorcookie,365);
		        tries++;
			}

			//------------------------------------------------------------------------	

			var Laberinto=0;
			var Torino=0;
			var Mercenarios=0;

			function Respostes(){

				var ids=["pregunta1","pregunta2","pregunta3","pregunta4","pregunta5"];

				for(i=0;i<ids.length;i++){

					var pregunta=document.getElementsByName(ids[i]);

					for (j=0;j<pregunta.length;j++){

						if(pregunta[0].checked){
							Laberinto++;
						}else if(pregunta[1].checked){
							Mercenarios++;
						}else if(pregunta[2].checked){
							Torino++;
						}
					}
			    }

				fo2.style.display='none';
				fo3.style.display='block';

				mostraImatges();
			}


			//----------------------------------------------------------------------
			var arrayLaberinto=[ "http://es.web.img1.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/77/68/91/20531609.jpg",
								"http://imagenes.sensacine.com/r_640_600/b_1_d6d6d6/medias/nmedia/18/62/90/40/18658327.jpg",
								"http://es.web.img1.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/62/90/40/19087846.jpg",
								"http://imagenes.sensacine.com/r_640_600/b_1_d6d6d6/medias/nmedia/18/62/90/40/19087848.jpg",
								"http://es.web.img2.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/62/90/40/19087850.jpg"];

			var arrayTorino=["   http://es.web.img2.acsta.net/r_640_600/b_1_d6d6d6/pictures/210/096/21009604_20130530232058293.jpg",
								"http://es.web.img3.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/67/90/91/19018384.jpg",
								"http://es.web.img2.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/67/90/93/19050643.jpg",
								"http://es.web.img3.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/67/90/93/19022573.jpg",
								"http://es.web.img2.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/67/90/93/19022578.jpg"];

			var arrayMercenarios=[  "http://es.web.img1.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/78/35/07/20235442.jpg",
									"http://es.web.img1.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/70/17/56/19415609.jpg",
									"http://es.web.img3.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/70/28/80/19127171.jpg",
									"http://es.web.img2.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/70/17/56/19090257.jpg",
									"http://es.web.img2.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/78/57/80/19472886.jpg"];

			var arrayLio=[  "http://es.web.img1.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/77/68/91/20531609.jpg",
							"http://es.web.img2.acsta.net/r_640_600/b_1_d6d6d6/pictures/210/096/21009604_20130530232058293.jpg",
							"http://es.web.img1.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/78/35/07/20235442.jpg",
							"http://es.web.img2.acsta.net/r_640_600/b_1_d6d6d6/medias/nmedia/18/70/17/56/19090257.jpg",
							"http://imagenes.sensacine.com/r_640_600/b_1_d6d6d6/medias/nmedia/18/62/90/40/19087848.jpg"
							 ];

			var carpetaimatges={};

			function mostraImatges(){
			
				if(Laberinto>Torino && Laberinto>Mercenarios){
					carregarImatges(arrayLaberinto, main);
					document.getElementById("printarResposta").innerHTML="La pel·licula que et defineix es: Laberinto!!";
				}else if(Torino>Laberinto && Torino>Mercenarios){
					carregarImatges(arrayTorino, main);
					document.getElementById("printarResposta").innerHTML="La pel·licula que et defineix es: Gran Torino!!";
				}else if(Mercenarios>Laberinto && Mercenarios>Torino){
					carregarImatges(arrayMercenarios, main);
					document.getElementById("printarResposta").innerHTML="La pel·licula que et defineix es: Los Mercenarios!!";
				}else{
					carregarImatges(arrayLio, main);
					document.getElementById("printarResposta").innerHTML="No t'aclares, t'agraden totes els tipus de pelis!!";
				}
				
			}

			function carregarImatges(arrayimatges,callback){
					
					var contimatgescarregades=0;
					
					for(var src in arrayimatges){
						carpetaimatges[src]= new Image();
						carpetaimatges[src].onload= function(){
							if(++contimatgescarregades==arrayimatges.length){	 //Bucle per carregar les imatges dins un array{}
								callback();
							}
						};
						carpetaimatges[src].src=arrayimatges[src];
					}	
				}

			function main(){
				var primera=true;
				var cont=0;
				var x;
				var trobat=false;
				var randoms=[];
				document.getElementById("imatges").innerHTML="";
				while(cont<5){									//bucle per mostrar 5 imatges aleatories
					trobat=false;	
					x= Math.floor((Math.random() * 5));
					for(i=0;i<randoms.length;i++){
						if(x==randoms[i]){
							trobat=true;				//busca si el random aconseguit ja existeix dins un array de randoms
						}								//si ja existex, no fa res, si no imprimeix la imatge en posicio x
					}
					if(trobat!=true){
						if(primera==true){
							randoms[cont]=x;
							document.getElementById("imatges").innerHTML+="<img style='border-radius: 20px; display: block; margin: 0 auto;' src="+carpetaimatges[x].src+" width='400' height='450'> <br>";
							cont++;
							primera=false;
						}else{
							randoms[cont]=x;
							document.getElementById("imatges").innerHTML+="<img style=' margin-left: 5px; border-radius: 100px'src="+carpetaimatges[x].src+" width='200' height='200' >";
							cont++;
						}
					}
				}
			}

//---------------------------------------------------------------------------------------------------

			function Reset(){
				fo3.style.display='none';
				fo1.style.display="block";
	
				 document.getElementById("tries").innerHTML="Cops que has fet el test: "+tries;
                
                 Laberinto=0;
			     Torino=0;
			     Mercenarios=0;
			}
			
		</script>
	</body>
</html>